<!DOCTYPE html>
<html lang="es-VE">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grado33 Barinas | Dise침a tu Franela en L칤nea</title>
    <meta name="description" content="Editor de camisetas en l칤nea Barinas. Personaliza tu franela con DTF, vinil y fotos. Env칤os a todo el pa칤s.">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.min.js"></script>

    <style>
        /* ESTILO: NE칍N & CREATIVO */
        :root {
            --brand: #00e5ff;    /* Cyan Ne칩n */
            --accent: #ff007f;   /* Fucsia Ne칩n */
            --bg: #121212;
            --surface: #1e1e1e;
            --text: #ffffff;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; }
        body { background: var(--bg); color: var(--text); }
        a { text-decoration: none; color: inherit; }
        
        /* Header */
        header { padding: 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--brand); position: sticky; top: 0; background: rgba(18,18,18,0.95); z-index: 1000; }
        .logo { font-size: 1.5rem; font-weight: bold; text-transform: uppercase; letter-spacing: 2px; }
        .logo span { color: var(--brand); }
        .btn-cta { background: var(--brand); color: black; padding: 10px 20px; border-radius: 50px; font-weight: bold; cursor: pointer; border: none; }
        
        /* Hero */
        .hero { height: 80vh; display: flex; align-items: center; justify-content: center; text-align: center; background: radial-gradient(circle at center, #2a2a2a 0%, #121212 100%); }
        .hero h1 { font-size: 3rem; margin-bottom: 20px; text-transform: uppercase; }
        .hero span { color: var(--accent); }
        
        /* --- EDITOR DE CAMISETAS (NUEVO) --- */
        .editor-section { padding: 40px 20px; background: #1a1a1a; border-top: 2px solid var(--accent); }
        .editor-container { 
            display: flex; flex-wrap: wrap; gap: 30px; justify-content: center; max-width: 1200px; margin: 0 auto; 
        }
        
        .canvas-area {
            position: relative;
            border: 2px dashed #444;
            border-radius: 10px;
            background: #252525;
            display: flex; justify-content: center; align-items: center;
            overflow: hidden;
        }
        
        .controls-area {
            flex: 1; min-width: 300px; max-width: 400px;
            background: #222; padding: 25px; border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }
        
        .control-group { margin-bottom: 20px; }
        .control-label { display: block; margin-bottom: 10px; font-weight: bold; color: var(--brand); }
        
        .color-btn { width: 30px; height: 30px; border-radius: 50%; border: 2px solid #fff; cursor: pointer; display: inline-block; margin-right: 5px; }
        
        .upload-btn {
            background: #333; color: white; padding: 10px; border-radius: 5px; cursor: pointer; display: block; text-align: center; border: 1px solid #555;
        }
        .upload-btn:hover { background: #444; border-color: var(--brand); }
        
        .action-btn {
            width: 100%; padding: 15px; margin-top: 10px; font-size: 1.1rem; font-weight: bold;
            border: none; border-radius: 5px; cursor: pointer; text-transform: uppercase;
        }
        .btn-add-text { background: var(--accent); color: white; }
        .btn-download { background: #25D366; color: white; margin-top: 20px; }
        
        /* Grid Servicios */
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; padding: 40px 20px; max-width: 1200px; margin: 0 auto; }
        .card { background: var(--surface); border-radius: 10px; overflow: hidden; transition: 0.3s; border: 1px solid #333; }
        .card:hover { border-color: var(--brand); transform: translateY(-5px); }
        .card img { width: 100%; height: 250px; object-fit: cover; }
        .card-body { padding: 20px; }
        .card h3 { margin-bottom: 10px; color: var(--brand); }
        
        /* Footer */
        footer { text-align: center; padding: 40px; background: black; color: #666; }

        /* Bot칩n WhatsApp */
        .wap { position: fixed; bottom: 20px; right: 20px; background: #25D366; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 30px; color: white; box-shadow: 0 0 10px var(--brand); z-index: 2000;}
        
        @media (max-width: 768px) {
            .hero h1 { font-size: 2.2rem; }
            .editor-container { flex-direction: column; }
            .canvas-area canvas { max-width: 100%; }
        }
    </style>
</head>
<body>

    <header>
        <div class="logo">Grado<span>33</span></div>
        <a href="#editor" class="btn-cta">Dise침ar Ahora</a>
    </header>

    <section class="hero">
        <div>
            <h1>Personaliza tu <span>Flow</span></h1>
            <p style="font-size: 1.2rem; margin-bottom: 30px;">Crea tu propia franela en segundos. Sube tu imagen y posici칩nala.</p>
            <a href="#editor" class="btn-cta" style="background: var(--accent); color: white;">PROBAR EDITOR</a>
        </div>
    </section>

    <section id="editor" class="editor-section">
        <h2 style="text-align: center; margin-bottom: 30px; color: white;">Taller Creativo <span style="color:var(--brand)">Grado33</span></h2>
        
        <div class="editor-container">
            
            <div class="canvas-area" id="canvas-container">
                <canvas id="tshirt-canvas" width="400" height="500"></canvas>
            </div>

            <div class="controls-area">
                
                <div class="control-group">
                    <span class="control-label">1. Color de Franela:</span>
                    <div class="color-btn" style="background: white;" onclick="changeShirtColor('#ffffff')"></div>
                    <div class="color-btn" style="background: #111;" onclick="changeShirtColor('#111111')"></div>
                    <div class="color-btn" style="background: #e74c3c;" onclick="changeShirtColor('#e74c3c')"></div>
                    <div class="color-btn" style="background: #3498db;" onclick="changeShirtColor('#3498db')"></div>
                </div>

                <div class="control-group">
                    <span class="control-label">2. Sube tu Dise침o / Foto:</span>
                    <label class="upload-btn">
                        <i class="fas fa-cloud-upload-alt"></i> Cargar Imagen
                        <input type="file" id="imgLoader" style="display: none;">
                    </label>
                </div>

                <div class="control-group">
                    <span class="control-label">3. Agregar Texto:</span>
                    <input type="text" id="text-string" placeholder="Tu frase aqu칤..." style="width: 100%; padding: 10px; margin-bottom: 5px; background: #333; border: 1px solid #555; color: white;">
                    <button class="action-btn btn-add-text" onclick="addText()">Agregar Texto</button>
                </div>

                <div class="control-group" style="display: flex; gap: 10px; margin-top: 10px;">
                    <button onclick="deleteObject()" style="background: #c0392b; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">Borrar Selecci칩n</button>
                </div>

                <div style="border-top: 1px solid #444; margin-top: 20px; padding-top: 20px;">
                    <p style="font-size: 0.9rem; color: #aaa; margin-bottom: 10px;">Al finalizar, se descargar치 la imagen. Env칤ala a nuestro WhatsApp.</p>
                    <button class="action-btn btn-download" onclick="downloadAndSend()">
                        <i class="fab fa-whatsapp"></i> Terminar y Pedir
                    </button>
                </div>

            </div>
        </div>
    </section>

    <section id="catalogo" class="grid">
        <div class="card">
            <img src="images/pareja/buzo-pareja01.jpg" alt="Franelas Pareja">
            <div class="card-body">
                <h3>Regalos & Parejas</h3>
                <p>Combina con tu persona favorita. Dise침os 칰nicos para aniversarios.</p>
            </div>
        </div>
        <div class="card">
            <img src="images/dtf-metro.jpg" alt="DTF por metro">
            <div class="card-body">
                <h3>Servicio DTF por Metro</h3>
                <p>쯊ienes plancha? Te vendemos el metro impreso listo para estampar.</p>
            </div>
        </div>
        <div class="card">
            <img src="images/camisa-mecanico-personalizada.jpg" alt="Uniformes">
            <div class="card-body">
                <h3>Uniformes Corporativos</h3>
                <p>Dale identidad a tu negocio. Bordados y estampados resistentes.</p>
            </div>
        </div>
    </section>

    <footer>
        <p>游늸 Barinas, Venezuela | Env칤os Nacionales (MRW, Zoom)</p>
        <p>춸 2026 Estilos Grado33</p>
    </footer>

    <a href="https://wa.me/584261728306" class="wap"><i class="fab fa-whatsapp"></i></a>

    <script>
        // Inicializar Fabric Canvas
        var canvas = new fabric.Canvas('tshirt-canvas');
        
        // Cargar Camiseta de Fondo (Aseg칰rate de tener 'images/shirt-template.png')
        // Si no tienes la imagen a칰n, esto pondr치 un cuadro gris de ejemplo
        var shirtUrl = 'images/shirt-template.png'; 
        
        // Funci칩n para cambiar color de fondo del canvas (simula color de camiseta)
        function changeShirtColor(color) {
            document.getElementById('canvas-container').style.backgroundColor = color;
        }

        // Cargar imagen de camiseta al inicio (opcional, si es transparente usa el div de fondo)
        // Puedes comentar esto si solo quieres usar el color de fondo del div
        fabric.Image.fromURL(shirtUrl, function(img) {
            img.set({
                scaleX: canvas.width / img.width,
                scaleY: canvas.height / img.height,
                selectable: false,
                evented: false 
            });
            // canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas)); // Descomenta si tienes la imagen PNG transparente
        });

        // 1. SUBIR IMAGEN
        document.getElementById('imgLoader').onchange = function(e) {
            var reader = new FileReader();
            reader.onload = function(event) {
                var imgObj = new Image();
                imgObj.src = event.target.result;
                imgObj.onload = function() {
                    var image = new fabric.Image(imgObj);
                    image.scaleToWidth(200); // Tama침o inicial
                    image.set({
                        left: 100,
                        top: 100
                    });
                    canvas.add(image);
                    canvas.setActiveObject(image);
                }
            }
            reader.readAsDataURL(e.target.files[0]);
        }

        // 2. AGREGAR TEXTO
        function addText() {
            var text = document.getElementById("text-string").value;
            if(text === "") return;
            
            var textObj = new fabric.Text(text, {
                left: 100,
                top: 100,
                fontFamily: 'Arial',
                fill: '#fff',
                fontSize: 30
            });
            canvas.add(textObj);
            canvas.setActiveObject(textObj);
        }

        // 3. BORRAR OBJETO
        function deleteObject() {
            var activeObj = canvas.getActiveObject();
            if (activeObj) {
                canvas.remove(activeObj);
            }
        }

        // 4. DESCARGAR Y ENVIAR
        function downloadAndSend() {
            // Deseleccionar todo para la foto
            canvas.discardActiveObject().renderAll();
            
            // Convertir a imagen
            var dataURL = canvas.toDataURL({
                format: 'png',
                quality: 1
            });

            // Crear enlace de descarga autom치tico
            var link = document.createElement('a');
            link.download = 'mi-dise침o-grado33.png';
            link.href = dataURL;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);

            // Mensaje de WhatsApp
            setTimeout(function() {
                var phone = "584261728306";
                var text = "Hola Grado33! Acabo de crear un dise침o en su web y lo descargu칠. Te paso la foto por aqu칤 para que me la cotices.";
                var url = "https://wa.me/" + phone + "?text=" + encodeURIComponent(text);
                window.open(url, '_blank');
            }, 1000);
        }
    </script>

</body>
</html>